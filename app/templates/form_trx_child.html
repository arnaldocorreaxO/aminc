{% load widget_tweaks %}
{% load security_extras %}
{% load static %}

{# 游닍 Recursos comunes para formularios transaccionales #}
{% block head_list %}
  <!-- Validaci칩n con jQuery Validate -->
  <script src="{% static 'lib/jquery-validation-1.19.5/dist/jquery.validate.js' %}"></script>
  <script src="{% static 'lib/jquery-validation-1.19.5/dist/localization/messages_es.js' %}"></script>

  {% comment %}
    Este script se carga din치micamente desde insertarFormularioTransaccion.js
    Ejemplo de inclusi칩n autom치tica:
    <script src="{% static 'prestamo/js/trx501.js' %}"></script>
  {% endcomment %}

  <style>
    .error {
      color: #F00;
      background-color: #FFF;
    }
  </style>
{% endblock %}

{# 游꿢 Espacio para incluir estilos o scripts espec칤ficos del formulario #}
{% block head_form %}{% endblock %}

{# 游 Contenido principal del formulario hijo #}
{% block content %}
  <form method="post" action="." enctype="multipart/form-data" id="frmTransaccionHijo" class="form">
    <div class="card {{ dshboard.card }}">
      <div class="card-header">
        <h3 class="card-title">
          {% if action == 'add' %}
            <i class="fas fa-plus"></i>
          {% else %}
            <i class="fas fa-edit"></i>
          {% endif %}
          {{ title }}
        </h3>
      </div>

      <div class="card-body">
        <div class="container-fluid">
          <input type="hidden" name="action" id="action" value="{{ action }}">
          {% csrf_token %}

           {# 游대 Renderizado de campos visibles del formulario #}
          <div class="row">
            {% for field in form.visible_fields %}
              <div class="form-group col-md-{{ field.field.col|default:6 }}">
                <label>{{ field.label }}:</label>
                {% if field|is_checkbox %}
                  {{ field }}
                {% else %}
                  {{ field|add_class:'form-control'|attr:"autocomplete:off" }}
                {% endif %}
              </div>
            {% endfor %}
          </div>


          {# 游늷 Espacio para campos adicionales o layout personalizado #}
          {% block extra_fields %}{% endblock %}

        </div>
      </div>

      {# 游빌 Pie del formulario con botones de acci칩n #}
      {% block box_footer %}
        <div class="card-footer">
          {% block buttons %}
            <button type="button" class="btn btn-success btn-flat" id="procesar">
              <i class="fas fa-sync"></i> Procesar
            </button>
          {% endblock %}
        </div>
      {% endblock %}
    </div>
  </form>
{% endblock %}
